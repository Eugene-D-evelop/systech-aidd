# ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é

## –°—Ç–∞—Ç—É—Å: –ì–û–¢–û–í –ö –î–ï–ü–õ–û–Æ üöÄ

–ü–æ—Å–ª–µ–¥–Ω—è—è –ø—Ä–æ–≤–µ—Ä–∫–∞: 18 –æ–∫—Ç—è–±—Ä—è 2025

---

## 1. ‚úÖ –§–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- ‚úÖ `docker-compose.prod.yml` - **–ì–û–¢–û–í**
  - –ü–æ—Ä—Ç—ã: 3007 (frontend), 8007 (api) ‚úì
  - URL: http://83.147.246.172:8007 ‚úì
  - –û–±—Ä–∞–∑—ã: ghcr.io/eugene-d-evelop/systech-aidd-* ‚úì

- ‚úÖ `env.production.example` - **–ì–û–¢–û–í**
  - –í—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–ø–∏—Å–∞–Ω—ã ‚úì
  - –ü–æ–¥—Ä–æ–±–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ ‚úì
  - Production notes ‚úì

### –ú–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ `migrations/001_create_messages.sql` - **–ì–û–¢–û–í**
- ‚úÖ `migrations/002_create_users.sql` - **–ì–û–¢–û–í**
- ‚úÖ `migrations/003_create_chat_messages.sql` - **–ì–û–¢–û–í**

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ `docs/guides/manual-deploy.md` - **–ì–û–¢–û–í**
  - 8 —à–∞–≥–æ–≤ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è ‚úì
  - Troubleshooting —Å–µ–∫—Ü–∏—è ‚úì
  - –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã ‚úì

- ‚úÖ `devops/doc/DEPLOY_QUICKSTART.md` - **–ì–û–¢–û–í**
  - –ö—Ä–∞—Ç–∫–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è ‚úì

- ‚úÖ `devops/FILES_TO_DEPLOY.md` - **–ì–û–¢–û–í**
  - –°–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ ‚úì
  - –ö–æ–º–∞–Ω–¥—ã –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è ‚úì

### –°–∫—Ä–∏–ø—Ç—ã
- ‚úÖ `deploy-check.sh` - **–ì–û–¢–û–í**
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ ‚úì
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ API –∏ Frontend ‚úì
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ ‚úì

---

## 2. ‚úÖ Docker –æ–±—Ä–∞–∑—ã –≤ ghcr.io

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ (–≤—ã–ø–æ–ª–Ω–µ–Ω–∞ 18.10.2025)

- ‚úÖ **Bot –æ–±—Ä–∞–∑** - –î–û–°–¢–£–ü–ï–ù
  ```
  ghcr.io/eugene-d-evelop/systech-aidd-bot:latest
  Platform: linux/amd64
  Status: ‚úì –ü—É–±–ª–∏—á–Ω–æ –¥–æ—Å—Ç—É–ø–µ–Ω
  ```

- ‚úÖ **API –æ–±—Ä–∞–∑** - –î–û–°–¢–£–ü–ï–ù
  ```
  ghcr.io/eugene-d-evelop/systech-aidd-api:latest
  Platform: linux/amd64
  Status: ‚úì –ü—É–±–ª–∏—á–Ω–æ –¥–æ—Å—Ç—É–ø–µ–Ω
  ```

- ‚úÖ **Frontend –æ–±—Ä–∞–∑** - –î–û–°–¢–£–ü–ï–ù
  ```
  ghcr.io/eugene-d-evelop/systech-aidd-frontend:latest
  Platform: linux/amd64
  Status: ‚úì –ü—É–±–ª–∏—á–Ω–æ –¥–æ—Å—Ç—É–ø–µ–Ω
  ```

### –ö–æ–º–∞–Ω–¥–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏:
```bash
# –õ–æ–∫–∞–ª—å–Ω–æ –º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:
docker manifest inspect ghcr.io/eugene-d-evelop/systech-aidd-bot:latest
docker manifest inspect ghcr.io/eugene-d-evelop/systech-aidd-api:latest
docker manifest inspect ghcr.io/eugene-d-evelop/systech-aidd-frontend:latest
```

---

## 3. ‚ö†Ô∏è –ß–¢–û –ù–£–ñ–ù–û –ü–û–î–ì–û–¢–û–í–ò–¢–¨ –ü–ï–†–ï–î –î–ï–ü–õ–û–ï–ú

### 3.1. –°–æ–∑–¥–∞—Ç—å .env —Ñ–∞–π–ª
```bash
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —à–∞–±–ª–æ–Ω
cp env.production.example .env

# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ:
nano .env
```

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è:**
- [ ] `TELEGRAM_BOT_TOKEN` - —Ç–æ–∫–µ–Ω –æ—Ç @BotFather
- [ ] `OPENROUTER_API_KEY` - API –∫–ª—é—á –æ—Ç OpenRouter
- [ ] `POSTGRES_PASSWORD` - —Å–∏–ª—å–Ω—ã–π –ø–∞—Ä–æ–ª—å –¥–ª—è –ë–î
- [ ] `DATABASE_URL` - –æ–±–Ω–æ–≤–∏—Ç–µ –ø–∞—Ä–æ–ª—å –≤ URL (–¥–æ–ª–∂–µ–Ω —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å POSTGRES_PASSWORD)

### 3.2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å SSH –∫–ª—é—á
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –∫–ª—é—á–∞
ls -la ~/.ssh/

# –ï—Å–ª–∏ –∫–ª—é—á –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω –æ—Ç–¥–µ–ª—å–Ω–æ, —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ:
# ~/.ssh/systech_server
chmod 600 ~/.ssh/systech_server
```

### 3.3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
```bash
# –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
ssh systech@83.147.246.172

# –ò–ª–∏ —Å –æ—Ç–¥–µ–ª—å–Ω—ã–º –∫–ª—é—á–æ–º:
ssh -i ~/.ssh/systech_server systech@83.147.246.172
```

---

## 4. üìã –ò–ù–°–¢–†–£–ö–¶–ò–ò –ü–û –†–ê–ó–í–ï–†–¢–´–í–ê–ù–ò–Æ

### –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
üìñ **[docs/guides/manual-deploy.md](../docs/guides/manual-deploy.md)**
- –ü–æ—à–∞–≥–æ–≤–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ (8 —à–∞–≥–æ–≤)
- –û–±—ä—è—Å–Ω–µ–Ω–∏–µ –∫–∞–∂–¥–æ–π –∫–æ–º–∞–Ω–¥—ã
- Troubleshooting

### –ë—ã—Å—Ç—Ä–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è (–¥–ª—è –æ–ø—ã—Ç–Ω—ã—Ö)
‚ö° **[devops/doc/DEPLOY_QUICKSTART.md](doc/DEPLOY_QUICKSTART.md)**
- –¢–æ–ª—å–∫–æ –∫–æ–º–∞–Ω–¥—ã
- –ë–µ–∑ –¥–µ—Ç–∞–ª—å–Ω—ã—Ö –æ–±—ä—è—Å–Ω–µ–Ω–∏–π

---

## 5. üéØ –ü–ê–†–ê–ú–ï–¢–†–´ –°–ï–†–í–ï–†–ê

```
–ê–¥—Ä–µ—Å:            83.147.246.172
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:     systech
–†–∞–±–æ—á–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è: /opt/systech/pyvovar

–ü–æ—Ä—Ç—ã:
- Frontend:       3007  ‚Üí  http://83.147.246.172:3007
- API:            8007  ‚Üí  http://83.147.246.172:8007
- API Docs:       8007  ‚Üí  http://83.147.246.172:8007/docs
- PostgreSQL:     5432  (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π, –Ω–µ –æ—Ç–∫—Ä—ã—Ç –Ω–∞—Ä—É–∂—É)

Docker —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω:         ‚úì
Docker Compose —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω: ‚úì
SSH –¥–æ—Å—Ç—É–ø –Ω–∞—Å—Ç—Ä–æ–µ–Ω:       ‚úì
```

---

## 6. üì¶ –°–ü–ò–°–û–ö –§–ê–ô–õ–û–í –î–õ–Ø –ö–û–ü–ò–†–û–í–ê–ù–ò–Ø

–ü–µ—Ä–µ–¥ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ–º –ø–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ —ç—Ç–∏ —Ñ–∞–π–ª—ã:

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ:**
1. `docker-compose.prod.yml` ‚úì
2. `.env` (—Å–æ–∑–¥–∞–π—Ç–µ –∏–∑ env.production.example) ‚ö†Ô∏è
3. `migrations/*.sql` (3 —Ñ–∞–π–ª–∞) ‚úì

**–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ:**
4. `deploy-check.sh` ‚úì

**–ö–æ–º–∞–Ω–¥—ã –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è:**
```bash
scp docker-compose.prod.yml systech@83.147.246.172:/opt/systech/pyvovar/
scp .env systech@83.147.246.172:/opt/systech/pyvovar/
scp -r migrations systech@83.147.246.172:/opt/systech/pyvovar/
scp deploy-check.sh systech@83.147.246.172:/opt/systech/pyvovar/
```

---

## 7. ‚úÖ –ö–†–ò–¢–ï–†–ò–ò –£–°–ü–ï–®–ù–û–ì–û –î–ï–ü–õ–û–Ø

–ü–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

### –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
- [ ] PostgreSQL –∑–∞–ø—É—â–µ–Ω –∏ healthy
- [ ] Bot –∑–∞–ø—É—â–µ–Ω
- [ ] API –∑–∞–ø—É—â–µ–Ω
- [ ] Frontend –∑–∞–ø—É—â–µ–Ω

### –ú–∏–≥—Ä–∞—Ü–∏–∏
- [ ] –í—Å–µ 3 –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ
- [ ] –¢–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã –≤ PostgreSQL (messages, users, chat_messages)

### –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–∏—Å–æ–≤
- [ ] API health: `curl http://83.147.246.172:8007/health` ‚Üí `{"status":"healthy"}`
- [ ] API docs: http://83.147.246.172:8007/docs ‚Üí Swagger UI –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
- [ ] Frontend: http://83.147.246.172:3007 ‚Üí –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- [ ] Telegram –±–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –∫–æ–º–∞–Ω–¥—É `/start`
- [ ] API endpoints —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] Frontend –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ API
- [ ] –ù–µ—Ç –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö

---

## 8. üîç –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–í–ï–†–ö–ê

–ü–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –∑–∞–ø—É—Å—Ç–∏—Ç–µ:

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –∏–ª–∏ –ª–æ–∫–∞–ª—å–Ω–æ
bash deploy-check.sh 83.147.246.172
```

–°–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç:
- ‚úì –°—Ç–∞—Ç—É—Å Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
- ‚úì –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å API (health endpoint)
- ‚úì –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å Frontend
- ‚úì –õ–æ–≥–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫

---

## 9. üìù –ü–û–°–õ–ï –£–°–ü–ï–®–ù–û–ì–û –î–ï–ü–õ–û–Ø

1. **–°–æ–∑–¥–∞—Ç—å –æ—Ç—á–µ—Ç:**
   - –§–∞–π–ª: `devops/doc/reports/d2-deployment-report.md`
   - –í–∫–ª—é—á–∏—Ç—å: –ª–æ–≥–∏, —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä–æ–∫, –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

2. **–û–±–Ω–æ–≤–∏—Ç—å roadmap:**
   - –ò–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å D2 –Ω–∞ "‚úÖ Done"
   - –§–∞–π–ª: `devops/doc/devops-roadmap.md`

3. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
   - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ª–æ–≥–æ–≤
   - –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –±—ç–∫–∞–ø—ã PostgreSQL
   - –ê–ª–µ—Ä—Ç—ã –Ω–∞ –æ—à–∏–±–∫–∏

---

## üöÄ –ì–û–¢–û–í–´ –ö –†–ê–ó–í–ï–†–¢–´–í–ê–ù–ò–Æ!

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í—Å–µ —Ñ–∞–π–ª—ã –≥–æ—Ç–æ–≤—ã, –æ–±—Ä–∞–∑—ã –¥–æ—Å—Ç—É–ø–Ω—ã, –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∞–∫—Ç—É–∞–ª—å–Ω—ã

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:**
1. –°–æ–∑–¥–∞–π—Ç–µ `.env` —Ñ–∞–π–ª –∏–∑ `env.production.example`
2. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã –∏ –ø–∞—Ä–æ–ª–∏
3. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏: **[docs/guides/manual-deploy.md](../docs/guides/manual-deploy.md)**

---

**–£–¥–∞—á–∏ –≤ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–∏! üéâ**

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –ø—Ä–æ–±–ª–µ–º—ã, –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ —Å–µ–∫—Ü–∏–∏ Troubleshooting –≤ manual-deploy.md

