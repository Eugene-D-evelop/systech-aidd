# ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Docker Compose Setup - –ó–ê–í–ï–†–®–ï–ù–û

**–î–∞—Ç–∞:** 18 –æ–∫—Ç—è–±—Ä—è 2025  
**–°–ø—Ä–∏–Ω—Ç:** D0 - Basic Docker Setup  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–£–°–ü–ï–®–ù–û –ó–ê–í–ï–†–®–ï–ù–û**

---

## üéØ –ò—Ç–æ–≥–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–í—Å–µ —Å–µ—Ä–≤–∏—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ. Docker Compose setup –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é.

### –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤

| –°–µ—Ä–≤–∏—Å | –°—Ç–∞—Ç—É—Å | –ü—Ä–æ–≤–µ—Ä–∫–∞ |
|--------|--------|----------|
| **PostgreSQL** | ‚úÖ Running (Healthy) | –ë–∞–∑–∞ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è, –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã |
| **Bot** | ‚úÖ Running | –ü–æ–¥–∫–ª—é—á–µ–Ω –∫ –ë–î, –º–∏–≥—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ |
| **API** | ‚úÖ Running | –í—Å–µ endpoints —Ä–∞–±–æ—Ç–∞—é—Ç (/, /health, /docs, /api/stats/dashboard) |
| **Frontend** | ‚úÖ Running | Dashboard –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ API |

---

## üîç –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

### 1. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤
```bash
docker-compose up -d
docker-compose ps
```
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –í—Å–µ 4 —Å–µ—Ä–≤–∏—Å–∞ –∑–∞–ø—É—â–µ–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
**PostgreSQL:** ‚úÖ –ì–æ—Ç–æ–≤ –ø—Ä–∏–Ω–∏–º–∞—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è  
**Bot:** ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã (3/3), –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ –ë–î  
**API:** ‚úÖ Uvicorn –∑–∞–ø—É—â–µ–Ω, endpoints –æ—Ç–≤–µ—á–∞—é—Ç  
**Frontend:** ‚úÖ Next.js –≥–æ—Ç–æ–≤, Dashboard –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
**API Endpoints:**
- ‚úÖ `GET /` - 200 OK
- ‚úÖ `GET /health` - 200 OK
- ‚úÖ `GET /docs` - 200 OK (Swagger UI)
- ‚úÖ `GET /api/stats/dashboard` - 200 OK (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ –ë–î)

**Frontend:**
- ‚úÖ `http://localhost:3000` - –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
- ‚úÖ `http://localhost:3000/dashboard` - –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ

**Database:**
- ‚úÖ `localhost:5433` - –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

### 4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Frontend ‚Üî API
**–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** ‚ùå –û—à–∏–±–∫–∞ "fetch failed"  
**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** ‚úÖ –£—Å–ø–µ—à–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã —á–µ—Ä–µ–∑ Docker network

**–î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ —Ä–∞–±–æ—Ç—ã:**
```
api-1  | INFO: 172.19.0.5:55284 - "GET /api/stats/dashboard HTTP/1.1" 200 OK
```
*(172.19.0.5 - —ç—Ç–æ IP –∞–¥—Ä–µ—Å frontend –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞)*

---

## üîß –†–µ—à–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –ü–æ—Ä—Ç 3000 –∑–∞–Ω—è—Ç
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ—à–µ–Ω–æ
- **–†–µ—à–µ–Ω–∏–µ:** –û—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ª–æ–∫–∞–ª—å–Ω—ã–π dev-—Å–µ—Ä–≤–µ—Ä

### –ü—Ä–æ–±–ª–µ–º–∞ 2: Telegram bot conflict
- **–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ
- **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ù–µ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è production

### –ü—Ä–æ–±–ª–µ–º–∞ 3: Frontend SSR fetch failed
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ—à–µ–Ω–æ
- **–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö URL (SSR vs Client-side)
- **–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
  - `docker-compose.yml`: –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `API_URL=http://api:8000`
  - `frontend/src/lib/api.ts`: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä URL
  - `frontend/src/lib/chat-api.ts`: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä URL

---

## üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –í—Ä–µ–º—è –∑–∞–ø—É—Å–∫–∞ (—Ö–æ–ª–æ–¥–Ω—ã–π —Å—Ç–∞—Ä—Ç)
- **–°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–æ–≤:** ~4 –º–∏–Ω—É—Ç—ã (–ø–µ—Ä–≤—ã–π —Ä–∞–∑)
- **–ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤:** ~10 —Å–µ–∫—É–Ω–¥
- **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Ä–∞–±–æ—Ç–µ:** ~10-15 —Å–µ–∫—É–Ω–¥

### –†–∞–∑–º–µ—Ä—ã –æ–±—Ä–∞–∑–æ–≤
- Frontend: 1.18 GB
- API: 503 MB
- Bot: 503 MB
- PostgreSQL: ~240 MB
- **–û–±—â–∏–π —Ä–∞–∑–º–µ—Ä:** ~2.4 GB

### –í—Ä–µ–º—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ Next.js
- –ü–µ—Ä–≤–∞—è –∫–æ–º–ø–∏–ª—è—Ü–∏—è `/dashboard`: ~60-70 —Å–µ–∫—É–Ω–¥
- –ü–æ—Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏: ~1-2 —Å–µ–∫—É–Ω–¥—ã (—Å hot-reload)

---

## üìã –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

–í—Å–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏ –∏–∑ –ø–ª–∞–Ω–∞ D0 –≤—ã–ø–æ–ª–Ω–µ–Ω—ã:

- ‚úÖ `docker-compose up` –∑–∞–ø—É—Å–∫–∞–µ—Ç –≤—Å–µ 4 —Å–µ—Ä–≤–∏—Å–∞
- ‚úÖ Telegram Bot —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ –ë–î
- ‚úÖ Frontend –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ localhost:3000
- ‚úÖ API –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ localhost:8000/docs
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
- ‚úÖ Hot-reload —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ volume mounts
- ‚úÖ README —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ Docker-–∑–∞–ø—É—Å–∫—É
- ‚úÖ .env.example —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

---

## üöÄ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
‚úÖ **–ì–û–¢–û–í–û**
- –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç –ª–æ–∫–∞–ª—å–Ω–æ
- Hot-reload —É—Å–∫–æ—Ä—è–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É
- –õ–æ–≥–∏ –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ `docker-compose logs`
- –õ–µ–≥–∫–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

### –î–ª—è production
‚ö†Ô∏è **–¢—Ä–µ–±—É–µ—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞:**
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –¥–æ–º–µ–Ω—ã –≤ CORS
- –î–æ–±–∞–≤–∏—Ç—å secrets management
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å reverse proxy (nginx)
- –î–æ–±–∞–≤–∏—Ç—å health checks –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**–°–æ–∑–¥–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã:**
- ‚úÖ [–ü–ª–∞–Ω D0](../plans/d0-basic-docker-setup.md)
- ‚úÖ [–ü–æ–ª–Ω—ã–π –æ—Ç—á–µ—Ç –æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏](d0-testing-report.md)
- ‚úÖ [–ö—Ä–∞—Ç–∫–∞—è —Å–≤–æ–¥–∫–∞](d0-testing-summary.md)
- ‚úÖ [README –¥–ª—è –æ—Ç—á–µ—Ç–æ–≤](README.md)
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω [DevOps Roadmap](../devops-roadmap.md)
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω [README –ø—Ä–æ–µ–∫—Ç–∞](../../../README.md)

---

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**Docker Compose setup –¥–ª—è Systech AIDD –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω.**

–í—Å–µ —Å–µ—Ä–≤–∏—Å—ã —É—Å–ø–µ—à–Ω–æ:
- –ó–∞–ø—É—Å–∫–∞—é—Ç—Å—è –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π
- –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É—é—Ç –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –∑–∞–ø—Ä–æ—Å—ã
- –°–æ—Ö—Ä–∞–Ω—è—é—Ç –¥–∞–Ω–Ω—ã–µ –≤ PostgreSQL

**–ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –∑–∞–ø—É—Å–∫–∞:**
```bash
docker-compose up -d
```

**–ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:**
```bash
docker-compose ps
docker-compose logs -f
```

**–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã:**
- Frontend: http://localhost:3000
- API Docs: http://localhost:8000/docs
- Database: localhost:5433

---

## üìà –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

**D1 - Build & Publish:**
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å GitHub Actions –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–±–æ—Ä–∫–∏
- –ü—É–±–ª–∏–∫–æ–≤–∞—Ç—å –æ–±—Ä–∞–∑—ã –≤ GitHub Container Registry
- –î–æ–±–∞–≤–∏—Ç—å CI/CD workflow

**D2 - Manual Server Deploy:**
- –°–æ–∑–¥–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –¥–ª—è —Ä—É—á–Ω–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
- –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å production –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å SSH –¥–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–µ—Ä—É

**D3 - Auto Deploy:**
- –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–µ–ø–ª–æ–π —á–µ—Ä–µ–∑ GitHub Actions
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å workflow_dispatch –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞
- –î–æ–±–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å—Ç–∞—Ç—É—Å–µ –¥–µ–ø–ª–æ—è

---

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ:** 18 –æ–∫—Ç—è–±—Ä—è 2025  
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –£–°–ü–ï–•  
**–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –ø–µ—Ä–µ—Ö–æ–¥—É –∫ D1:** ‚úÖ –î–ê

