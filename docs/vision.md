# –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –≤–∏–¥–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

> **–ö–æ–Ω—Ü–µ–ø—Ü–∏—è:** –†–æ–ª–µ–≤–æ–π AI-–ø—Ä–æ–¥—É–∫—Ç —Å —á–µ—Ç–∫–æ–π —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π (–ø–æ–¥—Ä–æ–±–Ω–µ–µ: @idea.md)

## –¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞

–°–æ–∑–¥–∞–Ω–∏–µ **—Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ AI-–ø—Ä–æ–¥—É–∫—Ç–∞** –Ω–∞ –±–∞–∑–µ LLM —á–µ—Ä–µ–∑ Telegram —Å:
- üé≠ **–ß–µ—Ç–∫–æ–π —Ä–æ–ª—å—é** - –±–æ—Ç –Ω–µ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π, –∞ —ç–∫—Å–ø–µ—Ä—Ç–Ω—ã–π –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏
- üìã **–†–æ–ª–µ–≤—ã–º –ø—Ä–æ–º–ø—Ç–æ–º** - –ø–æ–≤–µ–¥–µ–Ω–∏–µ –∏ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç
- üîç **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å—é** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Ä–æ–ª—å –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ `/role`
- ‚ö° **–ü—Ä–æ—Å—Ç–æ—Ç–æ–π** - KISS –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, –º–∏–Ω–∏–º—É–º –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–π

## 1. –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- **Python 3.11+** - –æ—Å–Ω–æ–≤–Ω–æ–π —è–∑—ã–∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- **uv** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ –∏ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–º –æ–∫—Ä—É–∂–µ–Ω–∏–µ–º
- **aiogram 3.x** - –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è Telegram Bot API (polling —Ä–µ–∂–∏–º)
- **openai** - –∫–ª–∏–µ–Ω—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å LLM —á–µ—Ä–µ–∑ OpenRouter
- **make** - –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –∑–∞–¥–∞—á —Å–±–æ—Ä–∫–∏ –∏ –∑–∞–ø—É—Å–∫–∞

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
- **pydantic** - –≤–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ –¥–∞–Ω–Ω—ã—Ö
- **python-dotenv** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- **aiohttp** - –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ HTTP-–∑–∞–ø—Ä–æ—Å—ã (–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å aiogram)

### –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- **ruff** - –ª–∏–Ω—Ç–µ—Ä –∏ —Ñ–æ—Ä–º–∞—Ç—Ç–µ—Ä –∫–æ–¥–∞ (—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞: E, F, I, N, W, B, C4, UP, SIM, RET, ARG)
- **mypy** - —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤ (strict mode)
- **pytest** - —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- **pytest-asyncio** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ async —Ç–µ—Å—Ç–æ–≤
- **pytest-cov** - –∏–∑–º–µ—Ä–µ–Ω–∏–µ –ø–æ–∫—Ä—ã—Ç–∏—è –∫–æ–¥–∞

## 2. –ü—Ä–∏–Ω—Ü–∏–ø—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã
1. **KISS (Keep It Simple, Stupid)** - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ—Å—Ç–æ—Ç–∞ —Ä–µ—à–µ–Ω–∏–π
2. **–û–û–ü** - –æ–±—ä–µ–∫—Ç–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ —Å —á–µ—Ç–∫–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π
3. **1 –∫–ª–∞—Å—Å = 1 —Ñ–∞–π–ª** - –∫–∞–∂–¥—ã–π –∫–ª–∞—Å—Å –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ñ–∞–π–ª–µ
4. **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å** - async/await –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Telegram –∏ LLM API
5. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è** - .env —Ñ–∞–π–ª –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–µ–∫
6. **–ú–∏–Ω–∏–º—É–º –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–π** - —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —É—Ä–æ–≤–Ω–∏ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏
7. **–Ø–≤–Ω–æ–µ –ª—É—á—à–µ –Ω–µ—è–≤–Ω–æ–≥–æ** - –ø–æ–Ω—è—Ç–Ω—ã–π –∏ —á–∏—Ç–∞–µ–º—ã–π –∫–æ–¥

### –ß—Ç–æ –ù–ï –¥–µ–ª–∞–µ–º (–∞–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω—ã –¥–ª—è MVP)
- ‚ùå –°–ª–æ–∂–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (—Ñ–∞–±—Ä–∏–∫–∏, —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∏ —Ç.–¥.)
- ‚ùå –ò–∑–±—ã—Ç–æ—á–Ω–∞—è –º–æ–¥—É–ª—å–Ω–æ—Å—Ç—å
- ‚ùå –ü—Ä–µ–∂–¥–µ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
- ‚ùå –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —É—Ä–æ–≤–Ω–∏ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏
- ‚ùå –ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–ø–æ–∫–∞ –Ω–µ –Ω—É–∂–Ω—ã)

### –ü–æ–¥—Ö–æ–¥ –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
- –ü—Ä—è–º–æ–ª–∏–Ω–µ–π–Ω—ã–π –∫–æ–¥
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å –∫–ª–∞—Å—Å–æ–≤
- –ü–æ–Ω—è—Ç–Ω—ã–µ –∏–º–µ–Ω–∞ –∫–ª–∞—Å—Å–æ–≤ –∏ –º–µ—Ç–æ–¥–æ–≤
- –ö–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–µ–ª–∞–µ—Ç –æ–¥–Ω—É –≤–µ—â—å —Ö–æ—Ä–æ—à–æ

## 3. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
systech-aidd/
‚îú‚îÄ‚îÄ .env.example          # –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ .env                  # –†–µ–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–≤ .gitignore)
‚îú‚îÄ‚îÄ .gitignore
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ Makefile              # –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
‚îú‚îÄ‚îÄ pyproject.toml        # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –¥–ª—è uv + mypy + ruff
‚îú‚îÄ‚îÄ pytest.ini            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è pytest –∏ –º–∞—Ä–∫–µ—Ä—ã —Ç–µ—Å—Ç–æ–≤
‚îú‚îÄ‚îÄ uv.lock               # Lockfile –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
‚îú‚îÄ‚îÄ .cursor/
‚îÇ   ‚îî‚îÄ‚îÄ rules/            # –ü—Ä–∞–≤–∏–ª–∞ –¥–ª—è AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞
‚îÇ       ‚îú‚îÄ‚îÄ convertions.mdc    # –°–æ–≥–ª–∞—à–µ–Ω–∏—è –ø–æ –∫–æ–¥—É
‚îÇ       ‚îú‚îÄ‚îÄ qa_conventions.mdc # QA —Å–æ–≥–ª–∞—à–µ–Ω–∏—è –∏ TDD
‚îÇ       ‚îú‚îÄ‚îÄ workflow.mdc       # –ë–∞–∑–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
‚îÇ       ‚îî‚îÄ‚îÄ workflow_tdd.mdc   # TDD –ø—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
‚îú‚îÄ‚îÄ docs/
‚îÇ   ‚îú‚îÄ‚îÄ idea.md           # –ö–æ–Ω—Ü–µ–ø—Ü–∏—è —Ä–æ–ª–µ–≤–æ–≥–æ AI-–ø—Ä–æ–¥—É–∫—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ vision.md         # –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –≤–∏–¥–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ tasklist.md       # –û—Å–Ω–æ–≤–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
‚îÇ   ‚îî‚îÄ‚îÄ tasklist_tech_dept.md
‚îú‚îÄ‚îÄ prompts/              # –ü—Ä–æ–º–ø—Ç—ã –¥–ª—è —Ä–æ–ª–µ–≤–æ–≥–æ AI (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)
‚îÇ   ‚îú‚îÄ‚îÄ system_role.txt   # –û—Å–Ω–æ–≤–Ω–æ–π —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç
‚îÇ   ‚îú‚îÄ‚îÄ role_description.txt  # –û–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è –∫–æ–º–∞–Ω–¥—ã /role
‚îÇ   ‚îî‚îÄ‚îÄ examples/         # –ü—Ä–∏–º–µ—Ä—ã –¥—Ä—É–≥–∏—Ö —Ä–æ–ª–µ–π
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ main.py           # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ config.py         # –ö–ª–∞—Å—Å Config - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏–∑ .env
‚îÇ   ‚îú‚îÄ‚îÄ bot.py            # –ö–ª–∞—Å—Å TelegramBot - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–æ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ handlers.py       # –ö–ª–∞—Å—Å MessageHandler - –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π + /role
‚îÇ   ‚îú‚îÄ‚îÄ llm_client.py     # –ö–ª–∞—Å—Å LLMClient + LLMError - —Ä–∞–±–æ—Ç–∞ —Å OpenRouter
‚îÇ   ‚îî‚îÄ‚îÄ conversation.py   # –ö–ª–∞—Å—Å Conversation - –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–∏–∞–ª–æ–≥–∞ (defaultdict)
‚îî‚îÄ‚îÄ tests/
    ‚îú‚îÄ‚îÄ __init__.py
    ‚îú‚îÄ‚îÄ test_config.py
    ‚îú‚îÄ‚îÄ test_handlers.py
    ‚îú‚îÄ‚îÄ test_llm_client.py
    ‚îî‚îÄ‚îÄ test_conversation.py
```

### –û–ø–∏—Å–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

**–û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥—É–ª–∏:**
1. **main.py** - –∑–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏ —Å—Ç–∞—Ä—Ç polling (–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–∞–∫ –º–æ–¥—É–ª—å: `python -m src.main`)
2. **config.py** - –∑–∞–≥—Ä—É–∑–∫–∞ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Pydantic BaseSettings (—Ç–æ–∫–µ–Ω—ã, API –∫–ª—é—á–∏)
3. **bot.py** - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram –±–æ—Ç–∞ –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è handlers
4. **handlers.py** - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ Telegram —Å–æ–æ–±—â–µ–Ω–∏–π (/start, /role, /reset, —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è) + –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π LLM
5. **llm_client.py** - –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å LLM —á–µ—Ä–µ–∑ OpenRouter + –∫–ª–∞—Å—Å –∏—Å–∫–ª—é—á–µ–Ω–∏—è LLMError
6. **conversation.py** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–µ–π –¥–∏–∞–ª–æ–≥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–≤ –ø–∞–º—è—Ç–∏ —á–µ—Ä–µ–∑ defaultdict)

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- –Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ (–Ω–µ –∑–∞–≤–∏—Å—è—Ç –æ—Ç .env)
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –ø–æ–º–µ—á–µ–Ω—ã –º–∞—Ä–∫–µ—Ä–æ–º `@pytest.mark.integration`
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ pytest —Å async –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π (pytest-asyncio)
- –ú–æ–∫–∏ –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö API (Telegram, OpenRouter) –≤ —é–Ω–∏—Ç-—Ç–µ—Å—Ç–∞—Ö
- –ò–∑–º–µ—Ä–µ–Ω–∏–µ –ø–æ–∫—Ä—ã—Ç–∏—è –∫–æ–¥–∞ —á–µ—Ä–µ–∑ pytest-cov (—Ü–µ–ª—å: 45%+)

**–í—Å–µ–≥–æ 6 —Ñ–∞–π–ª–æ–≤ –∫–æ–¥–∞ + —Ç–µ—Å—Ç—ã + —Å—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è** - –º–∏–Ω–∏–º–∞–ª—å–Ω–æ –∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è MVP —Å –≤—ã—Å–æ–∫–∏–º –∫–∞—á–µ—Å—Ç–≤–æ–º –∫–æ–¥–∞.

## 4. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è —Å—Ö–µ–º–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ           main.py (Entry Point)         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                 ‚îÇ
                 ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         config.py (Config)              ‚îÇ ‚óÑ‚îÄ‚îÄ .env
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚ñº               ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  bot.py      ‚îÇ  ‚îÇ llm_client.py‚îÇ
‚îÇ(TelegramBot) ‚îÇ  ‚îÇ  (LLMClient) ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ                 ‚îÇ
       ‚ñº                 ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îÇ
‚îÇ handlers.py  ‚îÇ         ‚îÇ
‚îÇ(MessageHandler)‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ
       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇconversation.py‚îÇ
‚îÇ(Conversation)‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

1. **main.py** ‚Üí –ó–∞–≥—Ä—É–∂–∞–µ—Ç Config ‚Üí –°–æ–∑–¥–∞–µ—Ç TelegramBot –∏ LLMClient ‚Üí –ó–∞–ø—É—Å–∫–∞–µ—Ç polling
2. **TelegramBot** ‚Üí –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç MessageHandler
3. **User Message** ‚Üí MessageHandler ‚Üí Conversation (–¥–æ–±–∞–≤–ª—è–µ—Ç –≤ –∏—Å—Ç–æ—Ä–∏—é) ‚Üí LLMClient (–∑–∞–ø—Ä–æ—Å –∫ LLM) ‚Üí Response ‚Üí User
4. **Conversation** ‚Üí –•—Ä–∞–Ω–∏—Ç –∏—Å—Ç–æ—Ä–∏—é —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –ø–∞–º—è—Ç–∏ (—Å–ª–æ–≤–∞—Ä—å: "chat_id:user_id" ‚Üí —Å–ø–∏—Å–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏–π)

### –ü—Ä–∏–Ω—Ü–∏–ø—ã –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è

- **Config** - –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤—Å–µ–º–∏
- **TelegramBot** - –∑–∞–≤–∏—Å–∏—Ç —Ç–æ–ª—å–∫–æ –æ—Ç Config
- **LLMClient** - –∑–∞–≤–∏—Å–∏—Ç —Ç–æ–ª—å–∫–æ –æ—Ç Config, –±—Ä–æ—Å–∞–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏—è (–Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç UI-—Å–æ–æ–±—â–µ–Ω–∏—è)
- **MessageHandler** - –∑–∞–≤–∏—Å–∏—Ç –æ—Ç LLMClient –∏ Conversation, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è LLM
- **Conversation** - –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç defaultdict –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è —Å–ø–∏—Å–∫–æ–≤
- **–û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã** - –≤—Å–µ –º–æ–¥—É–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã (from .config import Config)

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- –ù–µ—Ç –ë–î - –≤—Å—ë –≤ –ø–∞–º—è—Ç–∏ (–ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ –∏—Å—Ç–æ—Ä–∏—è —Ç–µ—Ä—è–µ—Ç—Å—è)
- –ù–µ—Ç —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏
- –ö–∞–∂–¥—ã–π –∫–ª–∞—Å—Å –∏–º–µ–µ—Ç —á–µ—Ç–∫—É—é –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —á–µ—Ä–µ–∑ async/await

## 5. –ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö

### Config (Pydantic BaseSettings)

```python
telegram_bot_token: str           # –¢–æ–∫–µ–Ω Telegram –±–æ—Ç–∞
openrouter_api_key: str           # API –∫–ª—é—á OpenRouter
openrouter_model: str             # –ú–æ–¥–µ–ª—å LLM (–Ω–∞–ø—Ä–∏–º–µ—Ä, "anthropic/claude-3.5-sonnet")
system_prompt: str                # –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç (–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ä–æ–ª—å –∏ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –±–æ—Ç–∞)
max_history_length: int = 10     # –ú–∞–∫—Å–∏–º—É–º —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –∏—Å—Ç–æ—Ä–∏–∏
temperature: float = 0.7          # –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –¥–ª—è LLM (–∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å)
max_tokens: int = 1000            # –ú–∞–∫—Å–∏–º—É–º —Ç–æ–∫–µ–Ω–æ–≤ –≤ –æ—Ç–≤–µ—Ç–µ
timeout: int = 60                 # –¢–∞–π–º–∞—É—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API (—Å–µ–∫—É–Ω–¥—ã)
```

> **–ö–ª—é—á–µ–≤–æ–π –ø–∞—Ä–∞–º–µ—Ç—Ä:** `system_prompt` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ä–æ–ª—å, —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –∏ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –±–æ—Ç–∞

### Message (–ø—Ä–æ—Å—Ç–æ–π dict)

```python
{
    "role": str,        # "user" | "assistant" | "system"
    "content": str,     # –¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
    "timestamp": float  # Unix timestamp (time.time())
}
```

### Conversation Storage (in-memory)

```python
from collections import defaultdict

conversations: defaultdict[str, list[dict]] = defaultdict(list)
# –ö–ª—é—á: "chat_id:user_id" (—Å–æ—Å—Ç–∞–≤–Ω–æ–π –∫–ª—é—á)
# –ó–Ω–∞—á–µ–Ω–∏–µ: —Å–ø–∏—Å–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏–π (–∏—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–∞)
# defaultdict –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫ –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
```

### –ü—Ä–∏–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö

```python
{
    "123456789:987654321": [  # "chat_id:user_id"
        {"role": "system", "content": "–¢—ã –ø–æ–º–æ—â–Ω–∏–∫...", "timestamp": 1699000000.0},
        {"role": "user", "content": "–ü—Ä–∏–≤–µ—Ç!", "timestamp": 1699000001.0},
        {"role": "assistant", "content": "–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ!", "timestamp": 1699000002.5},
        {"role": "user", "content": "–ö–∞–∫ –¥–µ–ª–∞?", "timestamp": 1699000010.0},
        {"role": "assistant", "content": "–û—Ç–ª–∏—á–Ω–æ!", "timestamp": 1699000012.3}
    ]
}
```

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **–ù–∏–∫–∞–∫–∏—Ö –ë–î** - –≤—Å—è –∏—Å—Ç–æ—Ä–∏—è –≤ RAM
- **–ü—Ä–æ—Å—Ç—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã** - dict –∏ list
- **Pydantic** —Ç–æ–ª—å–∫–æ –¥–ª—è Config (–≤–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ)
- **–°–æ—Å—Ç–∞–≤–Ω–æ–π –∫–ª—é—á** - "chat_id:user_id" –¥–ª—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –≥—Ä—É–ø–ø–æ–≤—ã—Ö —á–∞—Ç–∞—Ö
- **Timestamp** - –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è (–º–æ–∂–µ—Ç –ø—Ä–∏–≥–æ–¥–∏—Ç—å—Å—è –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è)
- **–ò—Å—Ç–æ—Ä–∏—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∞** - —Ö—Ä–∞–Ω–∏–º —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ N —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ —Ç–æ–∫–µ–Ω–æ–≤
- **System prompt** –æ–¥–∏–Ω –Ω–∞ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–∑–∞–¥–∞–µ—Ç—Å—è –≤ .env)
- **–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã LLM** - temperature, max_tokens, timeout –≤ –∫–æ–Ω—Ñ–∏–≥–µ
- **–ü—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ –∏—Å—Ç–æ—Ä–∏—è —Ç–µ—Ä—è–µ—Ç—Å—è** - —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è MVP

## 6. –†–∞–±–æ—Ç–∞ —Å LLM

### LLMClient - –æ—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å

**–ò—Å–∫–ª—é—á–µ–Ω–∏—è:**
```python
class LLMError(Exception):
    """–ë–∞–∑–æ–≤–æ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –¥–ª—è –æ—à–∏–±–æ–∫ LLM."""
```

**–û—Å–Ω–æ–≤–Ω–æ–π –º–µ—Ç–æ–¥:**
```python
async def get_response(
    self, 
    messages: list[dict[str, str]], 
    system_prompt: str | None = None
) -> str
```

**Raises:**
- `Timeout` - –µ—Å–ª–∏ –∑–∞–ø—Ä–æ—Å –ø—Ä–µ–≤—ã—Å–∏–ª —Ç–∞–π–º–∞—É—Ç
- `APIError` - –µ—Å–ª–∏ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ OpenRouter API
- `LLMError` - –¥—Ä—É–≥–∏–µ –æ—à–∏–±–∫–∏ (–ø—É—Å—Ç–æ–π –æ—Ç–≤–µ—Ç, –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è)

### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è

1. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ OpenAI SDK** —Å –±–∞–∑–æ–≤—ã–º URL OpenRouter:
   ```python
   base_url = "https://openrouter.ai/api/v1"
   ```

2. **–§–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞:**
   - –ü—Ä–∏–Ω–∏–º–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —Ñ–æ—Ä–º–∞—Ç–µ OpenAI (—Ç–æ–ª—å–∫–æ role –∏ content, –±–µ–∑ timestamp)
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ OpenRouter —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–µ–∫—Å—Ç –æ—Ç–≤–µ—Ç–∞ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞

3. **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:**
   - `model` - –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞
   - `messages` - –∏—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–∞ (role + content)
   - `temperature` - –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞
   - `max_tokens` - –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞
   - `timeout` - –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞

4. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (Single Responsibility Principle):**
   - **LLMClient** –±—Ä–æ—Å–∞–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏—è: `Timeout`, `APIError`, `LLMError`
   - **MessageHandler** –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏—è –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç UI-—Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é:
     - `Timeout` ‚Üí "‚è±Ô∏è –ü—Ä–µ–≤—ã—à–µ–Ω–æ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–∞"
     - `APIError` ‚Üí "‚ùå –û—à–∏–±–∫–∞ API: {–¥–µ—Ç–∞–ª–∏}"
     - `LLMError` ‚Üí "‚ùå –û—à–∏–±–∫–∞ LLM: {–¥–µ—Ç–∞–ª–∏}"
   - –í—Å–µ –æ—à–∏–±–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ ERROR —Å –ø–æ–ª–Ω—ã–º —Ç—Ä–µ–π—Å–±–µ–∫–æ–º

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **–ü—Ä–æ—Å—Ç–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** - –æ–¥–∏–Ω –º–µ—Ç–æ–¥ –¥–ª—è –≤—Å–µ–≥–æ
- **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏** - LLMClient –Ω–µ –∑–Ω–∞–µ—Ç –æ UI, —Ç–æ–ª—å–∫–æ –±—Ä–æ—Å–∞–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏—è
- **–°—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è** - –≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω—ã
- **–ë–µ–∑ retry** - –ø–æ–∫–∞ –Ω–µ —É—Å–ª–æ–∂–Ω—è–µ–º (–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ—Ç–æ–º)
- **–ë–µ–∑ streaming** - –ø–æ–ª—É—á–∞–µ–º –ø–æ–ª–Ω—ã–π –æ—Ç–≤–µ—Ç —Å—Ä–∞–∑—É
- **–ë–µ–∑ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è** - –∫–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å –Ω–æ–≤—ã–π
- **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å** - await –¥–ª—è API –∑–∞–ø—Ä–æ—Å–∞
- **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è timestamp** - –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –≤ LLM —É–¥–∞–ª—è–µ–º timestamp –∏–∑ messages

### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```python
from openai import APIError, Timeout
from .llm_client import LLMClient, LLMError

llm_client = LLMClient(config)
messages = [{"role": "user", "content": "–ü—Ä–∏–≤–µ—Ç!"}]

try:
    response = await llm_client.get_response(
        messages=messages,
        system_prompt="–¢—ã –ø–æ–º–æ—â–Ω–∏–∫..."
    )
except Timeout:
    # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Ç–∞–π–º–∞—É—Ç
    logger.error("LLM timeout")
except APIError as e:
    # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –æ—à–∏–±–∫—É API
    logger.error(f"API error: {e}")
except LLMError as e:
    # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –¥—Ä—É–≥–∏–µ –æ—à–∏–±–∫–∏ LLM
    logger.error(f"LLM error: {e}")
```

## 7. –°—Ü–µ–Ω–∞—Ä–∏–∏ —Ä–∞–±–æ—Ç—ã

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ü–µ—Ä–≤–æ–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ –±–æ—Ç—É

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `/start`
2. –ë–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º:
   - –ü—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è —Å —É–∫–∞–∑–∞–Ω–∏–µ–º —Ä–æ–ª–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä: "–Ø Python Code Reviewer")
   - –ö—Ä–∞—Ç–∫–æ –æ–ø–∏—Å—ã–≤–∞–µ—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
   - –£–ø–æ–º–∏–Ω–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É `/role` –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –æ–ø–∏—Å–∞–Ω–∏—è
   - –£–ø–æ–º–∏–Ω–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É `/reset` –¥–ª—è —Å–±—Ä–æ—Å–∞ –∏—Å—Ç–æ—Ä–∏–∏
3. –°–æ–∑–¥–∞–µ—Ç—Å—è –Ω–æ–≤–∞—è –∏—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–∞ —Å system prompt

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –û–±—ã—á–Ω—ã–π –¥–∏–∞–ª–æ–≥

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
2. MessageHandler:
   - –ü–æ–ª—É—á–∞–µ—Ç chat_id –∏ user_id
   - –§–æ—Ä–º–∏—Ä—É–µ—Ç –∫–ª—é—á "chat_id:user_id"
   - –î–æ–±–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –∏—Å—Ç–æ—Ä–∏—é —Å timestamp
   - –ü–æ–ª—É—á–∞–µ—Ç –ø–æ–ª–Ω—É—é –∏—Å—Ç–æ—Ä–∏—é (–≤–∫–ª—é—á–∞—è system prompt —Å —Ä–æ–ª—å—é)
   - –ü–µ—Ä–µ–¥–∞–µ—Ç –∏—Å—Ç–æ—Ä–∏—é (–±–µ–∑ timestamp) –≤ LLMClient
3. LLMClient –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –≤ OpenRouter —Å —Ä–æ–ª–µ–≤—ã–º system prompt
4. –ü–æ–ª—É—á–∞–µ—Ç –æ—Ç–≤–µ—Ç –æ—Ç LLM (–æ—Ç–≤–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ä–æ–ª–∏ –±–æ—Ç–∞)
5. MessageHandler:
   - –î–æ–±–∞–≤–ª—è–µ—Ç –æ—Ç–≤–µ—Ç –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ –≤ –∏—Å—Ç–æ—Ä–∏—é —Å timestamp
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ—Ç–≤–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –≤ Telegram
6. **–†–æ–ª–µ–≤–∞—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å**: –í—Å–µ –æ—Ç–≤–µ—Ç—ã –æ—Å—Ç–∞—é—Ç—Å—è –≤ —Ä–∞–º–∫–∞—Ö —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –±–æ—Ç–∞

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏

1. –ï—Å–ª–∏ –∏—Å—Ç–æ—Ä–∏—è –ø—Ä–µ–≤—ã—à–∞–µ—Ç max_history_length:
   - –°–æ—Ö—Ä–∞–Ω—è–µ–º system prompt (–ø–µ—Ä–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ)
   - –£–¥–∞–ª—è–µ–º —Å–∞–º—ã–µ —Å—Ç–∞—Ä—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞
   - –û—Å—Ç–∞–≤–ª—è–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ N —Å–æ–æ–±—â–µ–Ω–∏–π

### –°—Ü–µ–Ω–∞—Ä–∏–π 4: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–æ–ª–∏ –±–æ—Ç–∞

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `/role`
2. MessageHandler:
   - –ß–∏—Ç–∞–µ—Ç –æ–ø–∏—Å–∞–Ω–∏–µ —Ä–æ–ª–∏ (–∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏–ª–∏ —Ñ–∞–π–ª–∞ `prompts/role_description.txt`)
   - –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç —Å —ç–º–æ–¥–∑–∏ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º
3. –ë–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç:
   - üé≠ –ù–∞–∑–≤–∞–Ω–∏–µ —Ä–æ–ª–∏
   - üìã –°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏ —Ñ—É–Ω–∫—Ü–∏–∏
   - ‚úÖ –ß—Ç–æ —É–º–µ–µ—Ç –¥–µ–ª–∞—Ç—å
   - ‚ùå –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è (—á—Ç–æ –ù–ï –≤—Ö–æ–¥–∏—Ç –≤ —Ä–æ–ª—å)
4. –ò—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–∞ –ù–ï –∏–∑–º–µ–Ω—è–µ—Ç—Å—è (–∫–æ–º–∞–Ω–¥–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è)

### –°—Ü–µ–Ω–∞—Ä–∏–π 5: –°–±—Ä–æ—Å –∏—Å—Ç–æ—Ä–∏–∏ –¥–∏–∞–ª–æ–≥–∞

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `/reset`
2. –ë–æ—Ç —É–¥–∞–ª—è–µ—Ç –≤—Å—é –∏—Å—Ç–æ—Ä–∏—é –¥–ª—è –∫–ª—é—á–∞ "chat_id:user_id"
3. –ë–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç: "–ò—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–∞ —Å–±—Ä–æ—à–µ–Ω–∞"
4. –ü—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º —Å–æ–æ–±—â–µ–Ω–∏–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è –Ω–æ–≤–∞—è –∏—Å—Ç–æ—Ä–∏—è —Å system prompt

### –°—Ü–µ–Ω–∞—Ä–∏–π 6: –†–∞–±–æ—Ç–∞ –≤ –≥—Ä—É–ø–ø–æ–≤–æ–º —á–∞—Ç–µ

1. –ù–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–∏—à—É—Ç –≤ –æ–¥–Ω–æ–º —á–∞—Ç–µ
2. –ö–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–º–µ–µ—Ç —Å–≤–æ—é –∏—Å—Ç–æ—Ä–∏—é (–±–ª–∞–≥–æ–¥–∞—Ä—è –∫–ª—é—á—É "chat_id:user_id")
3. –ò—Å—Ç–æ—Ä–∏–∏ –Ω–µ –ø–µ—Ä–µ—Å–µ–∫–∞—é—Ç—Å—è

### –°—Ü–µ–Ω–∞—Ä–∏–π 7: –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

1. LLMClient –±—Ä–æ—Å–∞–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ (Timeout, APIError, –∏–ª–∏ LLMError)
2. MessageHandler –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ
3. –õ–æ–≥–∏—Ä—É–µ—Ç –æ—à–∏–±–∫—É —Å –ø–æ–ª–Ω—ã–º —Ç—Ä–µ–π—Å–±–µ–∫–æ–º –Ω–∞ —É—Ä–æ–≤–Ω–µ ERROR
4. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–Ω—è—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
5. –ò—Å—Ç–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –∑–∞–ø—Ä–æ—Å
6. –ü—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–∫–∞—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å /reset

### –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

- `/start` - –∑–∞–ø—É—Å–∫ –±–æ—Ç–∞ –∏ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º —Ä–æ–ª–∏
- `/role` - –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–π —Ä–æ–ª–∏ –∏ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –±–æ—Ç–∞
- `/reset` - —Å–±—Ä–æ—Å –∏—Å—Ç–æ—Ä–∏–∏ –¥–∏–∞–ª–æ–≥–∞

## 8. –ü–æ–¥—Ö–æ–¥ –∫ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—é

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ .env

**–§–∞–π–ª `.env` (–Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—Å—è –≤ git):**
```env
# Telegram Bot
TELEGRAM_BOT_TOKEN=your_bot_token_here

# OpenRouter API
OPENROUTER_API_KEY=your_api_key_here
OPENROUTER_MODEL=anthropic/claude-3.5-sonnet

# LLM Parameters
TEMPERATURE=0.7
MAX_TOKENS=1000
TIMEOUT=60

# Bot Settings (Role Configuration)
SYSTEM_PROMPT=–¢—ã - Python Code Reviewer. –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—à—å Python –∫–æ–¥, –Ω–∞—Ö–æ–¥–∏—à—å –±–∞–≥–∏, –ø—Ä–µ–¥–ª–∞–≥–∞–µ—à—å —É–ª—É—á—à–µ–Ω–∏—è. –†–∞–±–æ—Ç–∞–µ—à—å —Ç–æ–ª—å–∫–æ —Å Python, –Ω–µ –ø–∏—à–µ—à—å –∫–æ–¥ –∑–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
MAX_HISTORY_LENGTH=10
```

> **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** `SYSTEM_PROMPT` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ä–æ–ª—å. –î–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Ä–æ–ª–µ–π –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–∞–π–ª—ã `prompts/*.txt`

**–§–∞–π–ª `.env.example` (–∫–æ–º–º–∏—Ç–∏—Ç—Å—è –≤ git):**
```env
# Telegram Bot
TELEGRAM_BOT_TOKEN=

# OpenRouter API
OPENROUTER_API_KEY=
OPENROUTER_MODEL=anthropic/claude-3.5-sonnet

# LLM Parameters
TEMPERATURE=0.7
MAX_TOKENS=1000
TIMEOUT=60

# Bot Settings (Role Configuration)
SYSTEM_PROMPT=–¢—ã - [–†–æ–ª—å –±–æ—Ç–∞]. [–û–ø–∏—Å–∞–Ω–∏–µ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π].
MAX_HISTORY_LENGTH=10
```

### –ö–ª–∞—Å—Å Config

- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç **Pydantic BaseSettings** —Å **SettingsConfigDict**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ `.env`
- –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
- –ü–∞–¥–∞–µ—Ç —Å –ø–æ–Ω—è—Ç–Ω–æ–π –æ—à–∏–±–∫–æ–π, –µ—Å–ª–∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–µ –∑–∞–¥–∞–Ω—ã
- –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è mypy strict mode

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **–ü—Ä–æ—Å—Ç–æ—Ç–∞** - –æ–¥–∏–Ω —Ñ–∞–π–ª .env —Å–æ –≤—Å–µ–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - —Å–µ–∫—Ä–µ—Ç—ã –Ω–µ –ø–æ–ø–∞–¥–∞—é—Ç –≤ git (.env –≤ .gitignore)
- **–í–∞–ª–∏–¥–∞—Ü–∏—è** - Pydantic –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–∏–ø—ã –∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è
- **–ü—Ä–∏–º–µ—Ä –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** - .env.example –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –Ω—É–∂–Ω–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å
- **–ù–∏–∫–∞–∫–∏—Ö –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏** - —Ç–æ–ª—å–∫–æ .env

### –•—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–æ–≤ (—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å)

> **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –î–ª—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–≥–æ —Ä–æ–ª–µ–≤–æ–≥–æ AI-–ø—Ä–æ–¥—É–∫—Ç–∞ (—Å–º. @idea.md) –ø—Ä–æ–º–ø—Ç—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è):**
```
prompts/
‚îú‚îÄ‚îÄ system_role.txt          # –û—Å–Ω–æ–≤–Ω–æ–π —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç —Å —Ä–æ–ª—å—é
‚îú‚îÄ‚îÄ role_description.txt     # –û–ø–∏—Å–∞–Ω–∏–µ —Ä–æ–ª–∏ –¥–ª—è –∫–æ–º–∞–Ω–¥—ã /role
‚îî‚îÄ‚îÄ examples/                # –ü—Ä–∏–º–µ—Ä—ã –¥—Ä—É–≥–∏—Ö —Ä–æ–ª–µ–π
    ‚îú‚îÄ‚îÄ code_reviewer.txt
    ‚îú‚îÄ‚îÄ sql_expert.txt
    ‚îî‚îÄ‚îÄ devops_helper.txt
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ñ–∞–π–ª–æ–≤–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è:**
- ‚úÖ **–í–µ—Ä—Å–∏–æ–Ω–Ω–æ—Å—Ç—å** - –ø—Ä–æ–º–ø—Ç—ã –≤ git, –º–æ–∂–Ω–æ –æ—Ç–∫–∞—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
- ‚úÖ **–ì–∏–±–∫–æ—Å—Ç—å** - –ª–µ–≥–∫–æ –º–µ–Ω—è—Ç—å —Ä–æ–ª—å –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞
- ‚úÖ **–ß–∏—Ç–∞–µ–º–æ—Å—Ç—å** - –±–æ–ª—å—à–∏–µ –ø—Ä–æ–º–ø—Ç—ã —É–¥–æ–±–Ω–µ–µ —á–∏—Ç–∞—Ç—å –≤ —Ñ–∞–π–ª–∞—Ö
- ‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–æ–ª–µ–π

**–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- –ü–æ–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `SYSTEM_PROMPT` –∏–∑ `.env` –¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã MVP
- –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –º–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ —Ñ–∞–π–ª–æ–≤–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–æ–ª–µ–≤–æ–≥–æ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞

> **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –î–ª—è —Ä–æ–ª–µ–≤–æ–≥–æ AI-–ø—Ä–æ–¥—É–∫—Ç–∞ —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω –∏ –¥–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```
–¢—ã - [–ù–∞–∑–≤–∞–Ω–∏–µ —Ä–æ–ª–∏].

–†–û–õ–¨:
[–î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ä–æ–ª–∏ –∏ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏]

–§–£–ù–ö–¶–ò–ò:
- [–§—É–Ω–∫—Ü–∏—è 1]
- [–§—É–Ω–∫—Ü–∏—è 2]
- [–§—É–Ω–∫—Ü–∏—è N]

–°–¢–ò–õ–¨ –û–ë–©–ï–ù–ò–Ø:
[–ö–∞–∫ –¥–æ–ª–∂–µ–Ω –æ–±—â–∞—Ç—å—Å—è –±–æ—Ç - —Ñ–æ—Ä–º–∞–ª—å–Ω—ã–π/–Ω–µ—Ñ–æ—Ä–º–∞–ª—å–Ω—ã–π, –∫—Ä–∞—Ç–∫–∏–π/—Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã–π]

–û–ì–†–ê–ù–ò–ß–ï–ù–ò–Ø:
- [–ß—Ç–æ –ù–ï –≤—Ö–æ–¥–∏—Ç –≤ —Ä–æ–ª—å]
- [–ù–∞ –∫–∞–∫–∏–µ –≤–æ–ø—Ä–æ—Å—ã –ù–ï –æ—Ç–≤–µ—á–∞–µ–º]

–§–û–†–ú–ê–¢ –û–¢–í–ï–¢–û–í:
[–ö–∞–∫ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–≤–µ—Ç—ã - —Å–ø–∏—Å–∫–∏, –∫–æ–¥, —Ç–∞–±–ª–∏—Ü—ã –∏ —Ç.–¥.]
```

**–ü—Ä–∏–º–µ—Ä –¥–ª—è Python Code Reviewer:**
```
–¢—ã - Python Code Reviewer.

–†–û–õ–¨:
–≠–∫—Å–ø–µ—Ä—Ç –ø–æ –ø—Ä–æ–≤–µ—Ä–∫–µ Python –∫–æ–¥–∞. –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—à—å –∫–æ–¥ –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ PEP 8,
–Ω–∞—Ö–æ–¥–∏—à—å –±–∞–≥–∏, –ø—Ä–µ–¥–ª–∞–≥–∞–µ—à—å —É–ª—É—á—à–µ–Ω–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.

–§–£–ù–ö–¶–ò–ò:
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∏–ª—è –∫–æ–¥–∞ (PEP 8)
- –ü–æ–∏—Å–∫ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –±–∞–≥–æ–≤
- –°–æ–≤–µ—Ç—ã –ø–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥—É
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

–°–¢–ò–õ–¨ –û–ë–©–ï–ù–ò–Ø:
–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–∏–≤–Ω—ã–π –∏ –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–π. –û–±—ä—è—Å–Ω—è–µ—à—å "–ø–æ—á–µ–º—É" –∑–∞ –∫–∞–∂–¥—ã–º –∑–∞–º–µ—á–∞–Ω–∏–µ–º.

–û–ì–†–ê–ù–ò–ß–ï–ù–ò–Ø:
- –ù–µ –ø–∏—à–µ—à—å –∫–æ–¥ –∑–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Ç–æ–ª—å–∫–æ –ø—Ä–∏–º–µ—Ä—ã)
- –ù–µ —Ä–∞–±–æ—Ç–∞–µ—à—å —Å –¥—Ä—É–≥–∏–º–∏ —è–∑—ã–∫–∞–º–∏ –∫—Ä–æ–º–µ Python
- –ù–µ –¥–µ–ª–∞–µ—à—å –ø–æ–ª–Ω—ã–π —Ä–µ–¥–∏–∑–∞–π–Ω –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –±–µ–∑ –∑–∞–ø—Ä–æ—Å–∞

–§–û–†–ú–ê–¢ –û–¢–í–ï–¢–û–í:
1. –ö—Ä–∞—Ç–∫–∞—è –æ—Ü–µ–Ω–∫–∞ (—Ö–æ—Ä–æ—à–æ/—Å—Ä–µ–¥–Ω–µ/—Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏)
2. –°–ø–∏—Å–æ–∫ –∑–∞–º–µ—á–∞–Ω–∏–π —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏
3. –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ —É–ª—É—á—à–µ–Ω–∏—é
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞:**
- ‚úÖ –ß–µ—Ç–∫–∏–µ –≥—Ä–∞–Ω–∏—Ü—ã –∫–æ–º–ø–µ—Ç–µ–Ω—Ü–∏–∏
- ‚úÖ –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ
- ‚úÖ –õ–µ–≥–∫–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å
- ‚úÖ –ü–æ–Ω—è—Ç–Ω–æ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∏ —Ä–∞–∑–≤–∏—Ç–∏—è

## 9. –ü–æ–¥—Ö–æ–¥ –∫ –ª–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏—é

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏—è

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –º–æ–¥—É–ª—å `logging` –∏–∑ Python
- –í—ã–≤–æ–¥ –≤ `stdout` (–∫–æ–Ω—Å–æ–ª—å)
- –§–æ—Ä–º–∞—Ç: `%(asctime)s - %(name)s - %(levelname)s - %(message)s`
- –£—Ä–æ–≤–µ–Ω—å: `INFO` –¥–ª—è production

### –ß—Ç–æ –ª–æ–≥–∏—Ä—É–µ–º

**INFO —É—Ä–æ–≤–µ–Ω—å:**
- –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
- –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (chat_id, user_id, —Ç–µ–∫—Å—Ç –æ–±—Ä–µ–∑–∞–Ω–Ω—ã–π –¥–æ 50 —Å–∏–º–≤–æ–ª–æ–≤)
- –û—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç–≤–µ—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- –í—ã–∑–æ–≤ –∫–æ–º–∞–Ω–¥ (/start, /role, /reset)
- –£—Å–ø–µ—à–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ LLM (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤)

**ERROR —É—Ä–æ–≤–µ–Ω—å:**
- –û—à–∏–±–∫–∏ –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ LLM API
- –û—à–∏–±–∫–∏ Telegram API
- Timeout –æ—à–∏–±–∫–∏
- –ù–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è

### –ß—Ç–æ –ù–ï –ª–æ–≥–∏—Ä—É–µ–º

- ‚ùå –ü–æ–ª–Ω—ã–µ —Ç–µ–∫—Å—Ç—ã —Å–æ–æ–±—â–µ–Ω–∏–π (–ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å)
- ‚ùå API –∫–ª—é—á–∏ –∏ —Ç–æ–∫–µ–Ω—ã
- ‚ùå DEBUG –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é (–ø–æ–∫–∞ –Ω–µ –Ω—É–∂–Ω–∞ –¥–ª—è MVP)
- ‚ùå –¢—Ä–µ–π—Å–±–µ–∫–∏ –≤ INFO (—Ç–æ–ª—å–∫–æ –≤ ERROR)

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **–ü—Ä–æ—Å—Ç–æ—Ç–∞** - —Ç–æ–ª—å–∫–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π logging, –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫
- **–ù–∏–∫–∞–∫–∏—Ö —Ñ–∞–π–ª–æ–≤** - —Ç–æ–ª—å–∫–æ stdout (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –ø–æ—Ç–æ–º –ø–æ–¥—Ö–≤–∞—Ç—è—Ç)
- **–ú–∏–Ω–∏–º—É–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏** - —Ç–æ–ª—å–∫–æ –≤–∞–∂–Ω–æ–µ
- **–ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å** - –Ω–µ –ª–æ–≥–∏—Ä—É–µ–º –ø–æ–ª–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **–û—Ç–ª–∞–¥–∫–∞** - –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç

### –ü—Ä–∏–º–µ—Ä –ª–æ–≥–æ–≤

```
2025-10-11 12:29:36 - __main__ - INFO - Configuration loaded successfully
2025-10-11 12:29:36 - src.conversation - INFO - Conversation storage initialized
2025-10-11 12:29:36 - src.llm_client - INFO - LLM client initialized with model: openai/gpt-oss-20b:free
2025-10-11 12:29:36 - src.bot - INFO - Telegram bot initialized
2025-10-11 12:29:36 - src.handlers - INFO - MessageHandler initialized
2025-10-11 12:29:36 - src.bot - INFO - Handlers registered
2025-10-11 12:29:36 - __main__ - INFO - Starting bot polling...
2025-10-11 12:29:36 - aiogram.dispatcher - INFO - Start polling
2025-10-11 12:29:37 - src.handlers - INFO - Message from user 1716154677 in chat 1716154677, length: 20
2025-10-11 12:29:37 - src.llm_client - INFO - Sending request to LLM: 2 messages, model: openai/gpt-oss-20b:free
2025-10-11 12:29:41 - src.llm_client - INFO - LLM response received, length: 21 chars
2025-10-11 12:29:41 - src.handlers - INFO - Response sent to user 1716154677, length: 21
2025-10-11 12:32:10 - src.handlers - INFO - Command /reset from user 1716154677 in chat 1716154677
2025-10-11 12:35:00 - src.handlers - ERROR - LLM timeout for user 1716154677
```

---

## 10. –ö–æ–º–∞–Ω–¥—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (Makefile)

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
make install          # uv sync

# –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
make run              # uv run python -m src.main

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞
make lint             # ruff check + mypy (strict mode)
make format           # ruff format

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
make test             # –í—Å–µ —Ç–µ—Å—Ç—ã + coverage (HTML –æ—Ç—á–µ—Ç)
make test-unit        # –¢–æ–ª—å–∫–æ —é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã (–Ω–µ —Ç—Ä–µ–±—É—é—Ç .env)
make test-integration # –¢–æ–ª—å–∫–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

# CI/CD
make ci               # lint + test-unit (–¥–ª—è pre-commit –ø—Ä–æ–≤–µ—Ä–∫–∏)
```

### –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞

**–¢–µ–∫—É—â–∏–µ –º–µ—Ç—Ä–∏–∫–∏:**
- ‚úÖ **Ruff**: All checks passed (–ø—Ä–∞–≤–∏–ª–∞: E, F, I, N, W, B, C4, UP, SIM, RET, ARG)
- ‚úÖ **Mypy**: Success (strict mode, 100% typed)
- ‚úÖ **Tests**: 47 —é–Ω–∏—Ç-—Ç–µ—Å—Ç–æ–≤ + 13 –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö = 60 –≤—Å–µ–≥–æ
- ‚úÖ **Coverage**: 81% –æ–±—â–∏–π (100% –¥–ª—è config.py, conversation.py, handlers.py, bot.py)

**–¶–µ–ª–∏:**
- Ruff: 0 –æ—à–∏–±–æ–∫ ‚úÖ
- Mypy: —Å—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π ‚úÖ
- Coverage: –º–∏–Ω–∏–º—É–º 45%, —Ü–µ–ª—å 80%+ ‚úÖ (–¥–æ—Å—Ç–∏–≥–Ω—É—Ç–æ 81%)
- –¢–µ—Å—Ç—ã: –≤—Å–µ —é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã –Ω–µ –∑–∞–≤–∏—Å—è—Ç –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤ ‚úÖ

---

## 11. –ü—Ä–∏–º–µ—Ä—ã –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —Ä–æ–ª–µ–≤–æ–π –º–æ–¥–µ–ª–∏

> **–ö–æ–Ω—Ü–µ–ø—Ü–∏—è:** –û–¥–∏–Ω –∫–æ–¥, —Ä–∞–∑–Ω—ã–µ —Ä–æ–ª–∏ —á–µ—Ä–µ–∑ —Å–º–µ–Ω—É —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞

### –í–∞—Ä–∏–∞–Ω—Ç—ã —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

**1. Python Code Reviewer**
- üìã –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞ –Ω–∞ PEP 8, –ø–æ–∏—Å–∫ –±–∞–≥–æ–≤, —Å–æ–≤–µ—Ç—ã –ø–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥—É
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç: Python –∫–æ–¥, –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Å–æ–≤–µ—Ç—ã, best practices
- ‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç: –î—Ä—É–≥–∏–µ —è–∑—ã–∫–∏, –Ω–∞–ø–∏—Å–∞–Ω–∏–µ –∫–æ–¥–∞ —Å –Ω—É–ª—è

**2. SQL Query Expert**
- üìã –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è SQL –∑–∞–ø—Ä–æ—Å–æ–≤, –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –ø–ª–∞–Ω–æ–≤ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç: SQL –≤—Å–µ—Ö –¥–∏–∞–ª–µ–∫—Ç–æ–≤, –∏–Ω–¥–µ–∫—Å—ã, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- ‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç: NoSQL, ORM –∫–æ–¥, –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ë–î

**3. DevOps Troubleshooter**
- üìã –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º –≤ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–µ, –∞–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç: Docker, K8s, CI/CD, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- ‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç: –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π, –Ω–∞–ø–∏—Å–∞–Ω–∏–µ –∫–æ–¥–∞

**4. API Documentation Assistant**
- üìã –ü–æ–º–æ—â—å –≤ –ø–æ–Ω–∏–º–∞–Ω–∏–∏ API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏, –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç: REST, GraphQL, SDK –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç: –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ API, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**5. Testing Strategy Consultant**
- üìã –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, —Ä–µ–≤—å—é —Ç–µ—Å—Ç-–∫–µ–π—Å–æ–≤
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç: Unit, integration, e2e —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
- ‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç: –ù–∞–ø–∏—Å–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤, –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

**6. Data Analysis Advisor**
- üìã –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –ø–æ –∞–Ω–∞–ª–∏–∑—É –¥–∞–Ω–Ω—ã—Ö, –≤—ã–±–æ—Ä –º–µ—Ç—Ä–∏–∫
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç: Pandas, NumPy, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è
- ‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç: ML –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ, –Ω–∞–ø–∏—Å–∞–Ω–∏–µ –∫–æ–¥–∞

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–æ–ª–µ–≤–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞

**–î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
- üéØ –Ø—Å–Ω–æ—Å—Ç—å - –ø–æ–Ω—è—Ç–Ω–æ, –¥–ª—è —á–µ–≥–æ –±–æ—Ç –∏ —á—Ç–æ –æ–Ω —É–º–µ–µ—Ç
- üèÜ –ö–∞—á–µ—Å—Ç–≤–æ - —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–µ—Ç –≥–ª—É–±–æ–∫–∏–µ –∑–Ω–∞–Ω–∏—è
- üîí –§–æ–∫—É—Å - –±–æ—Ç –Ω–µ —Ä–∞—Å–ø—ã–ª—è–µ—Ç—Å—è –Ω–∞ –≤—Å–µ –ø–æ–¥—Ä—è–¥
- üìä –ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç—å - —á–µ—Ç–∫–∏–µ –æ–∂–∏–¥–∞–Ω–∏—è –æ—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è

**–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞:**
- üîÑ –ì–∏–±–∫–æ—Å—Ç—å - —Å–º–µ–Ω–∞ —Ä–æ–ª–∏ = —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–∞
- üìù –í–µ—Ä—Å–∏–æ–Ω–Ω–æ—Å—Ç—å - –ø—Ä–æ–º–ø—Ç—ã –≤ git
- ‚úÖ –¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å - —á–µ—Ç–∫–∞—è —Ä–æ–ª—å = —á–µ—Ç–∫–∏–µ —Ç–µ—Å—Ç-–∫–µ–π—Å—ã
- üìà –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å - –º–Ω–æ–∂–µ—Å—Ç–≤–æ –±–æ—Ç–æ–≤ —Å —Ä–∞–∑–Ω—ã–º–∏ —Ä–æ–ª—è–º–∏

### –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞ —Ä–æ–ª–µ–≤–æ–π –º–æ–¥–µ–ª–∏

- **–°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è**: –ë–æ—Ç –Ω–µ –≤—ã—Ö–æ–¥–∏—Ç –∑–∞ —Ä–∞–º–∫–∏ —Ä–æ–ª–∏ –≤ 95%+ —Å–ª—É—á–∞–µ–≤
- **–£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç—å**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ–Ω–∏–º–∞—é—Ç —Ä–æ–ª—å –ø–æ—Å–ª–µ `/role`
- **–ö–∞—á–µ—Å—Ç–≤–æ**: –û—Ç–≤–µ—Ç—ã —ç–∫—Å–ø–µ—Ä—Ç–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è –≤ —Ä–∞–º–∫–∞—Ö —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
- **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å**: –°—Ç–∏–ª—å –∏ —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–æ–≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —Ä–æ–ª–∏

---

## –ò—Ç–æ–≥–æ

–î–∞–Ω–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –≤–∏–¥–µ–Ω–∏–µ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è **—Ä–æ–ª–µ–≤–æ–≥–æ AI-–ø—Ä–æ–¥—É–∫—Ç–∞** –≤ –≤–∏–¥–µ Telegram-–±–æ—Ç–∞. –°–ª–µ–¥—É—è –ø—Ä–∏–Ω—Ü–∏–ø–∞–º KISS –∏ –û–û–ü, —Å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø—Ä–∞–∫—Ç–∏–∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, –º—ã –ø–æ–ª—É—á–∞–µ–º:

- **6 —Ñ–∞–π–ª–æ–≤ –∫–æ–¥–∞** (main, config, bot, handlers, llm_client, conversation)
- **–†–æ–ª–µ–≤–∞—è —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è** —á–µ—Ä–µ–∑ —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç (—Å–º. @idea.md)
- **–ö–æ–º–∞–Ω–¥–∞ `/role`** –¥–ª—è –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –±–æ—Ç–∞
- **–ú–∏–Ω–∏–º—É–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π** (aiogram, openai, pydantic, python-dotenv)
- **–ü—Ä–æ—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** –±–µ–∑ –∏–∑–±—ã—Ç–æ—á–Ω—ã—Ö –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–π
- **–°—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è** (mypy strict mode)
- **–ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã** (—é–Ω–∏—Ç + –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ, TDD –ø–æ–¥—Ö–æ–¥)
- **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–æ–∫** (make ci)
- **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –∑–∞–ø—É—Å–∫—É** –∑–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è

**–ü—Ä–∏–Ω—Ü–∏–ø—ã –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞:**
1. **SRP** - –∫–∞–∂–¥—ã–π –∫–ª–∞—Å—Å –∏–º–µ–µ—Ç –æ–¥–Ω—É –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å (error handling –≤ handlers, –Ω–µ –≤ llm_client)
2. **–¢–∏–ø–∏–∑–∞—Ü–∏—è** - –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –º–µ—Ç–æ–¥—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω—ã
3. **–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å** - —é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã –æ—Ç –æ–∫—Ä—É–∂–µ–Ω–∏—è, TDD –ø—Ä–æ—Ü–µ—Å—Å (@workflow_tdd.mdc)
4. **–ü—Ä–æ—Å—Ç–æ—Ç–∞** - defaultdict –≤–º–µ—Å—Ç–æ —è–≤–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫, KISS –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
5. **CI/CD –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å** - make ci –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º

**–†–æ–ª–µ–≤–∞—è –º–æ–¥–µ–ª—å:**
- üé≠ **–°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è** - –±–æ—Ç —è–≤–ª—è–µ—Ç—Å—è —ç–∫—Å–ø–µ—Ä—Ç–æ–º –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏
- üìã **–ì–∏–±–∫–æ—Å—Ç—å** - —Å–º–µ–Ω–∞ —Ä–æ–ª–∏ —á–µ—Ä–µ–∑ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–∞
- üîç **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å** - –∫–æ–º–∞–Ω–¥–∞ `/role` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
- üìä **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –æ–¥–∏–Ω –∫–æ–¥, –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–π

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Å–ª—É–∂–∏—Ç –æ—Å–Ω–æ–≤–æ–π –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è **—Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö AI-–ø—Ä–æ–¥—É–∫—Ç–æ–≤** —Å —á–µ—Ç–∫–æ–π —Ä–æ–ª—å—é –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –ª–µ–≥–∫–æ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω –ø–æ–¥ —Ä–∞–∑–ª–∏—á–Ω—ã–µ –æ–±–ª–∞—Å—Ç–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è.


