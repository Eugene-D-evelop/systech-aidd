# üìã –ü–ª–∞–Ω —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ —É–ª—É—á—à–µ–Ω–∏—è: systech-aidd

## üéØ –û—Ç—á–µ—Ç –æ –ø—Ä–æ–≥—Ä–µ—Å—Å–µ

| –ò—Ç–µ—Ä–∞—Ü–∏—è | –ù–∞–∑–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | –ó–∞–≤–µ—Ä—à–µ–Ω–æ | –ó–∞–º–µ—Ç–∫–∏ |
|----------|----------|--------|-----------|---------|
| 1Ô∏è‚É£ | –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ (SRP) | ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ | 2025-01-11 | Error handling –≤—ã–Ω–µ—Å–µ–Ω |
| 2Ô∏è‚É£ | –°—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è + mypy | ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ | 2025-01-11 | 100% typed |
| 3Ô∏è‚É£ | –ù–µ–∑–∞–≤–∏—Å–∏–º—ã–µ —Ç–µ—Å—Ç—ã | ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ | 2025-01-11 | –ë–µ–∑ .env –≤ —é–Ω–∏—Ç-—Ç–µ—Å—Ç–∞—Ö |
| 4Ô∏è‚É£ | Coverage + CI –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è | ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ | 2025-01-11 | 81% coverage üéâ |
| 5Ô∏è‚É£ | –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫–æ–¥–∞ | ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ | 2025-01-11 | defaultdict |

**–õ–µ–≥–µ–Ω–¥–∞ —Å—Ç–∞—Ç—É—Å–æ–≤:**
- ‚è∏Ô∏è –ù–µ –Ω–∞—á–∞—Ç–æ
- üîÑ –í –ø—Ä–æ—Ü–µ—Å—Å–µ
- ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ
- ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º—ã

---

## üîß –ò—Ç–µ—Ä–∞—Ü–∏–∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ —É–ª—É—á—à–µ–Ω–∏—è

### –ò—Ç–µ—Ä–∞—Ü–∏—è 1: –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ (SRP)

**–¶–µ–ª—å:** –í—ã–Ω–µ—Å—Ç–∏ error handling –∏–∑ LLMClient –≤ —Å–ª–æ–π handlers

**–ü—Ä–æ–±–ª–µ–º–∞:** 
`LLMClient.get_response()` –≤–æ–∑–≤—Ä–∞—â–∞–ª UI-—Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö –≤–º–µ—Å—Ç–æ –ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞–Ω–∏—è –∏—Å–∫–ª—é—á–µ–Ω–∏–π, –Ω–∞—Ä—É—à–∞—è Single Responsibility Principle.

**–ó–∞–¥–∞—á–∏:**

- [x] –°–æ–∑–¥–∞—Ç—å –∫–∞—Å—Ç–æ–º–Ω–æ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ `LLMError` –≤ `src/llm_client.py`
- [x] –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ `LLMClient.get_response()`:
  - –ü—Ä–æ–±—Ä–∞—Å—ã–≤–∞—Ç—å `Timeout`, `APIError` –∫–∞–∫ –µ—Å—Ç—å
  - –û–±–æ—Ä–∞—á–∏–≤–∞—Ç—å –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏ –≤ `LLMError`
  - –£–±—Ä–∞—Ç—å –≤–æ–∑–≤—Ä–∞—Ç —Å—Ç—Ä–æ–∫ —Å –æ—à–∏–±–∫–∞–º–∏
- [x] –û–±–Ω–æ–≤–∏—Ç—å `src/handlers.py`:
  - –î–æ–±–∞–≤–∏—Ç—å –∏–º–ø–æ—Ä—Ç—ã: `Timeout`, `APIError`, `LLMError`
  - –û–±—Ä–∞–±–æ—Ç–∞—Ç—å —Ç—Ä–∏ —Ç–∏–ø–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π —Å –ø–æ–Ω—è—Ç–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
  - –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ ERROR
- [x] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–∏–Ω—Ç–µ—Ä–æ–º: `make lint`
- [x] –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã: `make test-unit`
- [x] –û–±–Ω–æ–≤–∏—Ç—å —Ñ–∞–π–ª—ã –ø—Ä–∞–≤–∏–ª `*.mdc` –∏ `vision.md` –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º

**–ö—Ä–∏—Ç–µ—Ä–∏–π –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏:** 
- `LLMClient` –±—Ä–æ—Å–∞–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏—è, –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç UI-–ª–æ–≥–∏–∫—É
- –í—Å–µ –æ—à–∏–±–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –≤ `handlers.py`
- –¢–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç

---

### –ò—Ç–µ—Ä–∞—Ü–∏—è 2: –°—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è + mypy

**–¶–µ–ª—å:** –î–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä–æ–≥—É—é –ø—Ä–æ–≤–µ—Ä–∫—É —Ç–∏–ø–æ–≤ —á–µ—Ä–µ–∑ mypy

**–ü—Ä–æ–±–ª–µ–º–∞:**
–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–∏–ø–æ–≤ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –æ—à–∏–±–∫–∞–º –≤ —Ä–∞–Ω—Ç–∞–π–º–µ.

**–ó–∞–¥–∞—á–∏:**

- [x] –î–æ–±–∞–≤–∏—Ç—å –≤ `pyproject.toml`:
  - `mypy>=1.7.0` –≤ dev-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
  - –°–µ–∫—Ü–∏—é `[tool.mypy]` —Å `strict = true`
  - –ü–ª–∞–≥–∏–Ω `pydantic.mypy`
  - –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ `aiogram.*`, `openai.*`
- [x] –†–∞—Å—à–∏—Ä–∏—Ç—å –ø—Ä–∞–≤–∏–ª–∞ `ruff`:
  - –î–æ–±–∞–≤–∏—Ç—å: `B` (bugbear), `C4`, `UP`, `SIM`, `RET`, `ARG`
  - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å `per-file-ignores` –¥–ª—è —Ç–µ—Å—Ç–æ–≤
- [x] –î–æ–±–∞–≤–∏—Ç—å —Ç–∏–ø—ã –≤–æ –≤—Å–µ –º–æ–¥—É–ª–∏:
  - `src/config.py`: –¥–æ–±–∞–≤–∏—Ç—å `model_config = SettingsConfigDict`
  - `src/bot.py`: —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞—Ç—å `register_handlers()`, `start()`
  - `src/handlers.py`: –¥–æ–±–∞–≤–∏—Ç—å `-> None` –¥–ª—è –≤—Å–µ—Ö –º–µ—Ç–æ–¥–æ–≤
  - `src/llm_client.py`: —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞—Ç—å `messages: list[dict[str, str]]`
  - `src/conversation.py`: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `dict[str, Any]`
  - `src/main.py`: –¥–æ–±–∞–≤–∏—Ç—å `-> None` –¥–ª—è `main()`
- [x] –ò—Å–ø—Ä–∞–≤–∏—Ç—å –≤—Å–µ –æ—à–∏–±–∫–∏ mypy
- [x] –î–æ–±–∞–≤–∏—Ç—å `type: ignore` –≥–¥–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ
- [x] –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: `uv sync`
- [x] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å: `make lint` (ruff + mypy)
- [x] –û–±–Ω–æ–≤–∏—Ç—å —Ñ–∞–π–ª—ã –ø—Ä–∞–≤–∏–ª `*.mdc` –∏ `vision.md` –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º

**–ö—Ä–∏—Ç–µ—Ä–∏–π –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏:**
- `mypy src/` –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- `ruff check` –ø—Ä–æ—Ö–æ–¥–∏—Ç —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º–∏ –ø—Ä–∞–≤–∏–ª–∞–º–∏
- –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏–º–µ—é—Ç –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ —Ç–∏–ø–æ–≤

---

### –ò—Ç–µ—Ä–∞—Ü–∏—è 3: –ù–µ–∑–∞–≤–∏—Å–∏–º—ã–µ —Ç–µ—Å—Ç—ã

**–¶–µ–ª—å:** –£–±—Ä–∞—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å —é–Ω–∏—Ç-—Ç–µ—Å—Ç–æ–≤ –æ—Ç `.env` —Ñ–∞–π–ª–∞

**–ü—Ä–æ–±–ª–µ–º–∞:**
–¢–µ—Å—Ç—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ `load_dotenv()`, —á—Ç–æ –¥–µ–ª–∞–µ—Ç –∏—Ö –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω—ã–º–∏.

**–ó–∞–¥–∞—á–∏:**

- [x] –û–±–Ω–æ–≤–∏—Ç—å `tests/test_handlers.py`:
  - –£–±—Ä–∞—Ç—å `load_dotenv()`
  - –ü–µ—Ä–µ–¥–∞–≤–∞—Ç—å —è–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ —Ñ–∏–∫—Å—Ç—É—Ä—É `config()`
  - –ü–æ–º–µ—Ç–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã: `@pytest.mark.integration`
- [x] –û–±–Ω–æ–≤–∏—Ç—å `tests/test_config.py`:
  - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `monkeypatch` –¥–ª—è env –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
  - –ü–æ–º–µ—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã —Å —Ä–µ–∞–ª—å–Ω—ã–º .env –∫–∞–∫ `@pytest.mark.integration`
- [x] –û–±–Ω–æ–≤–∏—Ç—å `tests/test_llm_client.py`:
  - –î–æ–±–∞–≤–∏—Ç—å `pytestmark = pytest.mark.integration` (–≤–µ—Å—å —Ñ–∞–π–ª)
  - –û—Å—Ç–∞–≤–∏—Ç—å `load_dotenv()` —Ç–æ–ª—å–∫–æ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
- [x] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å `pytest.ini`:
  - –î–æ–±–∞–≤–∏—Ç—å –º–∞—Ä–∫–µ—Ä—ã: `asyncio`, `slow`, `integration`
  - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å asyncio_mode
- [x] –î–æ–±–∞–≤–∏—Ç—å `pytest-asyncio` –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- [x] –ó–∞–ø—É—Å—Ç–∏—Ç—å —é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã: `make test-unit` (–±–µ–∑ `.env`)
- [x] –û–±–Ω–æ–≤–∏—Ç—å —Ñ–∞–π–ª—ã –ø—Ä–∞–≤–∏–ª `*.mdc` –∏ `vision.md` –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º

**–ö—Ä–∏—Ç–µ—Ä–∏–π –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏:**
- –Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –±–µ–∑ `.env` —Ñ–∞–π–ª–∞
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –ø–æ–º–µ—á–µ–Ω—ã –∏ –º–æ–≥—É—Ç –±—ã—Ç—å –ø—Ä–æ–ø—É—â–µ–Ω—ã
- `make test-unit` –ø—Ä–æ—Ö–æ–¥–∏—Ç —É—Å–ø–µ—à–Ω–æ

---

### –ò—Ç–µ—Ä–∞—Ü–∏—è 4: Coverage + CI –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

**–¶–µ–ª—å:** –î–æ–±–∞–≤–∏—Ç—å –∏–∑–º–µ—Ä–µ–Ω–∏–µ –ø–æ–∫—Ä—ã—Ç–∏—è –∫–æ–¥–∞ –∏ –∫–æ–º–∞–Ω–¥—É –ø–æ–ª–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏

**–ü—Ä–æ–±–ª–µ–º–∞:**
–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞ –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º.

**–ó–∞–¥–∞—á–∏:**

- [x] –î–æ–±–∞–≤–∏—Ç—å `pytest-cov>=4.1.0` –≤ dev-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- [x] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å `pyproject.toml`:
  - –°–µ–∫—Ü–∏—è `[tool.pytest.ini_options]`
  - `testpaths = ["tests"]`
  - `asyncio_mode = "auto"`
- [x] –û–±–Ω–æ–≤–∏—Ç—å `Makefile`:
  - `lint`: –ø—Ä–æ–≤–µ—Ä–∫–∞ ruff + mypy –¥–ª—è `src/` –∏ `tests/`
  - `format`: —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ `src/` –∏ `tests/`
  - `test`: –≤—Å–µ —Ç–µ—Å—Ç—ã —Å coverage + HTML –æ—Ç—á–µ—Ç
  - `test-unit`: —Ç–æ–ª—å–∫–æ —é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã —Å coverage
  - `test-integration`: —Ç–æ–ª—å–∫–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
  - `ci`: –∫–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (lint + test-unit)
- [x] –î–æ–±–∞–≤–∏—Ç—å `.PHONY` —Ü–µ–ª–∏ –≤ Makefile
- [x] –ó–∞–ø—É—Å—Ç–∏—Ç—å `make ci` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
- [x] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å HTML –æ—Ç—á–µ—Ç coverage (–¥–æ–ª–∂–µ–Ω —Å–æ–∑–¥–∞—Ç—å—Å—è –≤ htmlcov/)
- [x] –û–±–Ω–æ–≤–∏—Ç—å —Ñ–∞–π–ª—ã –ø—Ä–∞–≤–∏–ª `*.mdc` –∏ `vision.md` –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º

**–ö—Ä–∏—Ç–µ—Ä–∏–π –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏:**
- –ö–æ–º–∞–Ω–¥–∞ `make ci` –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø–æ–ª–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É
- Coverage –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª–∏ –∏ HTML
- –í—Å–µ –∫–æ–º–∞–Ω–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

### –ò—Ç–µ—Ä–∞—Ü–∏—è 5: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫–æ–¥–∞

**–¶–µ–ª—å:** –£–ø—Ä–æ—Å—Ç–∏—Ç—å –∫–æ–¥ —á–µ—Ä–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `defaultdict`

**–ü—Ä–æ–±–ª–µ–º–∞:**
–í `src/conversation.py` —è–≤–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ `if user_key not in self.conversations` —Å–æ–∑–¥–∞—é—Ç –∏–∑–±—ã—Ç–æ—á–Ω—ã–π –∫–æ–¥.

**–ó–∞–¥–∞—á–∏:**

- [x] –û–±–Ω–æ–≤–∏—Ç—å `src/conversation.py`:
  - –î–æ–±–∞–≤–∏—Ç—å –∏–º–ø–æ—Ä—Ç: `from collections import defaultdict`
  - –ó–∞–º–µ–Ω–∏—Ç—å `dict` –Ω–∞ `defaultdict(list)` –≤ `__init__`
  - –£–¥–∞–ª–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É `if user_key not in self.conversations` –∏–∑ `add_message`
- [x] –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã: `make test-unit`
- [x] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤—Å–µ —Ç–µ—Å—Ç—ã `test_conversation.py` –ø—Ä–æ—Ö–æ–¥—è—Ç
- [x] –£–±–µ–¥–∏—Ç—å—Å—è –≤ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Ä–µ–≥—Ä–µ—Å—Å–∏–∏
- [x] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–∏–Ω—Ç–µ—Ä–æ–º: `make lint`
- [x] –û–±–Ω–æ–≤–∏—Ç—å —Ñ–∞–π–ª—ã –ø—Ä–∞–≤–∏–ª `*.mdc` –∏ `vision.md` –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º

**–ö—Ä–∏—Ç–µ—Ä–∏–π –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏:**
- –ö–æ–¥ —É–ø—Ä–æ—â–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `defaultdict`
- –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å

---

## üìù –ò—Ç–æ–≥–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞

```bash
# –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º
make ci

# –†–µ–∑—É–ª—å—Ç–∞—Ç—ã:
# ‚úÖ Ruff: All checks passed
# ‚úÖ Mypy: Success (strict mode)
# ‚úÖ Tests: 58 passed (56 unit + 2 integration)
# ‚úÖ Coverage: 81% (—Ü–µ–ª—å –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–∞! üéâ)
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–º–∞–Ω–¥

```bash
# –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
make install          # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
make run              # –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
make format           # –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞
make lint             # Ruff + Mypy
make test             # –í—Å–µ —Ç–µ—Å—Ç—ã + coverage
make test-unit        # –¢–æ–ª—å–∫–æ —é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã
make test-integration # –¢–æ–ª—å–∫–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ

# CI/CD
make ci               # –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (lint + test-unit)
```

### –ú–µ—Ç—Ä–∏–∫–∏ –ø–æ–∫—Ä—ã—Ç–∏—è

| –ú–æ–¥—É–ª—å | Coverage | –ó–∞–º–µ—Ç–∫–∏ |
|--------|----------|---------|
| `config.py` | 100% | ‚úÖ –ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ |
| `conversation.py` | 100% | ‚úÖ –ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ |
| `handlers.py` | 100% | ‚úÖ –ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ (–≤–∫–ª—é—á–∞—è error handling) |
| `bot.py` | 100% | ‚úÖ –ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ (–≤–∫–ª—é—á–∞—è polling) |
| `llm_client.py` | 80% | ‚úÖ –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø–æ–∫—Ä—ã—Ç–∞ |
| `main.py` | 0% | ‚ö†Ô∏è Entry point (–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ) |
| **–ò–¢–û–ì–û** | **81%** | ‚úÖ **–¶–µ–ª—å 80%+ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–∞!** |

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### ‚úÖ –î–æ—Å—Ç–∏–≥–Ω—É—Ç—ã–µ —Ü–µ–ª–∏:

1. ‚úÖ **Coverage 81%** - –ø—Ä–µ–≤—ã—à–µ–Ω —Ü–µ–ª–µ–≤–æ–π –ø–æ—Ä–æ–≥ 80%
2. ‚úÖ **–Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã –¥–ª—è –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π** - bot.py, handlers.py, llm_client.py
3. ‚úÖ **Error handling –ø–æ–∫—Ä—ã—Ç —Ç–µ—Å—Ç–∞–º–∏** - APITimeoutError, APIError, LLMError
4. ‚úÖ **Edge cases –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã** - timeout, –ø—É—Å—Ç—ã–µ –æ—Ç–≤–µ—Ç—ã, –∏—Å–∫–ª—é—á–µ–Ω–∏—è

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:

1. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å GitHub Actions** –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ `make ci`
2. **–î–æ–±–∞–≤–∏—Ç—å docstring –ø—Ä–æ–≤–µ—Ä–∫—É** —á–µ—Ä–µ–∑ `pydocstyle` –∏–ª–∏ `interrogate`
3. **–†–∞—Å—à–∏—Ä–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã** –¥–ª—è —Ä–µ–∞–ª—å–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
4. **–î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏** –¥–ª—è LLM –∑–∞–ø—Ä–æ—Å–æ–≤
5. **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å imports** —Å –ø–æ–º–æ—â—å—é `isort` –∏–ª–∏ `ruff --select I`

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–∞—á–µ—Å—Ç–≤–∞:

- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å coverage > 80% ‚úÖ
- –í—Å–µ –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å type hints
- –ó–∞–ø—É—Å–∫–∞—Ç—å `make ci` –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –∫–æ–º–º–∏—Ç–æ–º
- –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: `uv sync --upgrade`

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è

–ü–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ –æ–±–Ω–æ–≤–ª–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ —Ñ–∞–π–ª—ã:

1. `.cursor/rules/conventions.mdc` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–∞–≤–∏–ª–∞ —Ç–∏–ø–∏–∑–∞—Ü–∏–∏
2. `.cursor/rules/workflow.mdc` - –æ–±–Ω–æ–≤–ª–µ–Ω workflow —Å –Ω–æ–≤—ã–º–∏ –∫–æ–º–∞–Ω–¥–∞–º–∏
3. `docs/vision.md` - –æ—Ç—Ä–∞–∂–µ–Ω–∞ —Ç–µ–∫—É—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –í–∞–∂–Ω—ã–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏—è:

- **Error handling**: –∏—Å–∫–ª—é—á–µ–Ω–∏—è –ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–µ–Ω—å handlers
- **–¢–∏–ø–∏–∑–∞—Ü–∏—è**: strict mypy –¥–ª—è –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π src/
- **–¢–µ—Å—Ç—ã**: —é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã –Ω–µ –∑–∞–≤–∏—Å—è—Ç –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
- **CI**: –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ `make ci` –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º
- **Coverage**: —Ü–µ–ª—å 80%+ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–∞ (—Ç–µ–∫—É—â–µ–µ: 81%) ‚úÖ

---

## üîÑ –ü—Ä–æ—Ü–µ—Å—Å —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

### –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å:

| –ê—Å–ø–µ–∫—Ç | –ë—ã–ª–æ | –°—Ç–∞–ª–æ |
|--------|------|-------|
| Error handling | UI-—Å–æ–æ–±—â–µ–Ω–∏—è –≤ LLMClient | –ò—Å–∫–ª—é—á–µ–Ω–∏—è ‚Üí handlers |
| –¢–∏–ø–∏–∑–∞—Ü–∏—è | –ß–∞—Å—Ç–∏—á–Ω–∞—è | –°—Ç—Ä–æ–≥–∞—è (mypy strict) |
| –¢–µ—Å—Ç—ã | –ó–∞–≤–∏—Å—è—Ç –æ—Ç .env | 58 —Ç–µ—Å—Ç–æ–≤ (56 unit + 2 integration) |
| CI/CD | –†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ | `make ci` –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è |
| Coverage | –ù–µ –∏–∑–º–µ—Ä—è–ª–æ—Å—å | **81%** + HTML –æ—Ç—á–µ—Ç üéâ |
| –ö–æ–¥ | –Ø–≤–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ | defaultdict |

### –í—ã–≥–æ–¥—ã:

‚úÖ –õ–µ–≥—á–µ –Ω–∞—Ö–æ–¥–∏—Ç—å –±–∞–≥–∏ –Ω–∞ —ç—Ç–∞–ø–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (mypy)  
‚úÖ –ë—ã—Å—Ç—Ä–∞—è –ª–æ–∫–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º (make ci)  
‚úÖ –ü–æ–Ω—è—Ç–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (SRP, —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏)  
‚úÖ –°—Ç–∞–±–∏–ª—å–Ω—ã–µ —é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã (–Ω–µ –∑–∞–≤–∏—Å—è—Ç –æ—Ç –æ–∫—Ä—É–∂–µ–Ω–∏—è)  
‚úÖ –ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –ø–æ–∫—Ä—ã—Ç–∏—è –∫–æ–¥–∞ (pytest-cov)

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-10-11  
**–í–µ—Ä—Å–∏—è:** 1.1.0  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í—Å–µ –∏—Ç–µ—Ä–∞—Ü–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω—ã, —Ü–µ–ª—å coverage 81% –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–∞! üéâ

